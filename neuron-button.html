<link rel="import" href="../neuron-base/neuron-base.html">

<polymer-element name="neuron-button" attributes="toggle label" extends="neuron-base">
	<template>
		<style>
			:host{
				display: flex;
			}

			:host paper-button{
				flex: 1;
				margin: 0px;
			}

			:host paper-button[disabled]{
				background: rgba(255,255,255, 0.5);
				color: gray;
			}


		</style>

		<template repeat="{{value, i in elems}}">
			<paper-button class="{{state}}" toggle="{{toggle}}" disabled="{{state==='disconnected'}}" neuron-id="{{i}}" active?="{{neuronValues[i]}}" on-tap="{{actionTapped}}">
				{{label}} <template if="{{neuronValues.length > 1}}">{{i}}</template>
			</paper-button>
		</template>

		<shadow></shadow>
	</template>

	<script>
		Polymer({

			toggle: false,

			ready: function(){
				this.super();
			},

			actionTapped: function(evt){

				if(!this.neuron) return ;

				var neuronId = parseInt(evt.target.attributes["neuron-id"].value);
				var active = evt.target.active;

				if(this.toggle){
					this.send(neuronId, active ? 1 : 0);
				}else{
					this.sendEvent(neuronId);
				}
			}
		});

	</script>
</polymer-element>
